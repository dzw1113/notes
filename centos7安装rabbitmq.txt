
http://www.rabbitmq.com/install-rpm.html


1、下载erlang
http://www.erlang.org/downloads
scp root@10.168.55.122:/mnt/package/otp_src_19.1.tar.gz .
scp root@10.168.55.122:/mnt/package/rabbitmq-server-3.6.5-1.noarch.rpm .

安装erlang所需环境
yum -y install make gcc gcc-c++ kernel-devel m4 ncurses-devel openssl-devel unixODBC-dev

2、tar -xvzf otp_src_19.1.tar.gz
./configure --prefix=/usr/erlang --without-javac

3、make 
make install

校验：
进入/usr/erlang/bin
./erl

vim /etc/profile
export ERLANG_HOME=/usr/erlang
export PATH=${ERLANG_HOME}/bin:${PATH}

source /etc/profile

4、安装rabbitmq
rpm --import https://www.rabbitmq.com/rabbitmq-release-signing-key.asc
yum install rabbitmq-server-3.6.5-1.noarch.rpm


5、下载延时队列插件
chkconfig rabbitmq-server on
rabbitmq-plugins enable rabbitmq_management

rabbitmq-plugins list
mv rabbitmq_delayed_message_exchange-0.0.1.ez /usr/lib/rabbitmq/lib/rabbitmq_server-3.6.5/plugins/
启用：
rabbitmq-plugins enable rabbitmq_delayed_message_exchange

rabbitmq-server -detached


http://xxxxxxx:15672/
删除guest用户
默认网页是不允许访问的，需要增加一个用户修改一下权限，代码如下：
　　添加用户：rabbitmqctl add_user damon 123456
　　添加权限：rabbitmqctl set_permissions -p "/" damon ".*" ".*" ".*"
修改用户角色：rabbitmqctl set_user_tags damon administrator
#根据自己需要创建以下内容
创建虚拟主机：rabbitmqctl add_vhost vhost（vhost为虚拟主机名）
清理原始权限：rabbitmqctl clear_permissions -p / damon
授予新主机权限：rabbitmqctl set_permissions -p vhost damon ".*" ".*" ".*"


rabbitmqctl查看队列情况
http://blog.csdn.net/u014087707/article/details/53976576


firewall-cmd --permanent --zone=public --add-port=5672/tcp
firewall-cmd --reload
=======


http://www.rabbitmq.com/install-rpm.html


rpm瀹瑁锛?
渚璧崇郴
https://www.rabbitmq.com/which-erlang.html

rpm:erlang:https://github.com/rabbitmq/erlang-rpm/releases

rpm -i erlang-21.3.7-1.el7.x86_64.rpm
yum install socat
rpm -i rabbitmq-server-3.7.14-1.el7.noarch.rpm



1涓杞erlang
http://www.erlang.org/downloads
scp root@10.168.55.122:/mnt/package/otp_src_19.1.tar.gz .
scp root@10.168.55.122:/mnt/package/rabbitmq-server-3.6.5-1.noarch.rpm .

瀹瑁erlang澧
yum -y install make gcc gcc-c++ kernel-devel m4 ncurses-devel openssl-devel unixODBC-dev

2tar -xvzf otp_src_19.1.tar.gz
./configure --prefix=/usr/erlang --without-javac

3make 
make install

￠锛?
杩/usr/erlang/bin
./erl

vim /etc/profile
export ERLANG_HOME=/usr/erlang
export PATH=${ERLANG_HOME}/bin:${PATH}

source /etc/profile

4瀹瑁rabbitmq
rpm --import https://www.rabbitmq.com/rabbitmq-release-signing-key.asc
yum install rabbitmq-server-3.6.5-1.noarch.rpm


5涓杞藉欢堕浠?
chkconfig rabbitmq-server on
rabbitmq-plugins enable rabbitmq_management

rabbitmq-plugins list
mv rabbitmq_delayed_message_exchange-0.0.1.ez /usr/lib/rabbitmq/lib/rabbitmq_server-3.6.5/plugins/
锛?
rabbitmq-plugins enable rabbitmq_delayed_message_exchange

rabbitmq-server -detached


http://xxxxxxx:15672/
guestㄦ
榛璁ょ椤垫涓璁歌块锛瑕澧涓涓ㄦ蜂慨逛涓锛浠ｇ濡涓锛?
娣诲ㄦ凤rabbitmqctl add_user damon 123456
娣诲锛rabbitmqctl set_permissions -p "/" damon ".*" ".*" ".*"
淇圭ㄦ疯诧rabbitmqctl set_user_tags damon administrator
#规宸遍瑕寤轰互涓瀹?
寤鸿涓绘猴rabbitmqctl add_vhost vhost锛vhost涓鸿涓绘哄锛?
娓濮锛rabbitmqctl clear_permissions -p / damon
浜颁富烘锛rabbitmqctl set_permissions -p vhost damon ".*" ".*" ".*"


rabbitmqctlョ
http://blog.csdn.net/u014087707/article/details/53976576


firewall-cmd --permanent --zone=public --add-port=5672/tcp
firewall-cmd --reload


